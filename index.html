<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Sales Summary</title>
    <!-- Bootstrap 5 CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
</head>
<body>
<div class="container my-4">
    <h1 class="mb-4">Sales Summary</h1>
    <div class="mb-3">
        <h4>Total Sales: <span id="total-sales">0</span></h4>
    </div>
    <div class="table-responsive">
        <table class="table table-striped" id="sales-table">
            <thead>
                <tr>
                    <th>Item</th>
                    <th>Sales</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', () => {
    fetch('data.csv')
        .then(response => {
            if (!response.ok) {
                throw new Error('Network response was not ok');
            }
            return response.text();
        })
        .then(csvText => {
            const lines = csvText.trim().split('\n');
            let totalSales = 0;
            const tableBody = document.querySelector('#sales-table tbody');

            lines.forEach(line => {
                const parts = line.split(',');
                if (parts.length === 2) {
                    const item = parts[0].trim();
                    const salesStr = parts[1].trim();
                    const sales = parseFloat(salesStr);
                    if (!isNaN(sales)) {
                        totalSales += sales;

                        const row = document.createElement('tr');

                        const itemCell = document.createElement('td');
                        itemCell.textContent = item;
                        row.appendChild(itemCell);

                        const salesCell = document.createElement('td');
                        salesCell.textContent = sales.toFixed(2);
                        row.appendChild(salesCell);

                        tableBody.appendChild(row);
                    }
                }
            });

            document.getElementById('total-sales').textContent = totalSales.toFixed(2);
        })
        .catch(error => {
            console.error('Error fetching or parsing CSV:', error);
            document.getElementById('total-sales').textContent = 'Error';
        });
});
</script>
</body>
</html>